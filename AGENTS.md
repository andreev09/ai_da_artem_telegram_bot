# Руководство для агентов ai_da_artem_telegram_bot

## Контекст проекта
- Репозиторий содержит Telegram-бота на Flask (`main.py` использует `TelegramWebhookHandler`).
- Приложение развёртывается на Railway: слушайте `0.0.0.0` и порт из переменной окружения `PORT` (локально используйте 8000).
- Внешние зависимости: Telegram Bot API и CLI LibreOffice (`soffice`) для конвертации Excel.

## Что прочитать сначала
- `docs/architecture.md` — обзор модулей и потоков данных.
- `docs/development.md` — запуск, переменные окружения, тесты, конвертация.
- `docs/agent_guide.md` — чек-листы и шаблоны коммуникации.
- Тексты интерфейса находятся в `texts.py`/`texts.json`; контакты сохраняются в `authorized_contacts.jsonl`.

## Рабочий процесс
1. Сформулируйте и зафиксируйте план (включая ключевые файлы) перед изменениями.
2. Убедитесь, что `git status` чист и используйте ветку по умолчанию (без новых веток, если не указано иное).
3. Пользуйтесь `rg` для поиска по проекту; избегайте `ls -R` и `grep -R`.
4. После изменений подготовьте краткое резюме, перечень файлов и результаты проверок.

## Требования к коду
- Соблюдайте лучшие практики Python: типы, docstring для публичных функций, логирование через `logging`.
- Придерживайтесь PEP 8; допускается автоформатирование `black` (ограничивайте строки до 120 символов).
- Не оставляйте мёртвый код, отладочные принты и закомментированные блоки.
- При работе с Flask избегайте глобального состояния, конфигурацию берите из окружения.
- Новые зависимости фиксируйте в `requirements.txt` и проверяйте совместимость с Python 3.11+.

## Тесты и проверки
- Запускайте `pytest` (или `python -m unittest`) перед коммитом; сообщайте команду и результат.
- При изменении конвертера Excel обеспечьте доступность `SOFFICE_BIN` и прохождение `tests/test_xls_converter.py`.
- Для ручных проверок вебхуков используйте `flask run` либо `python main.py` с заданным `TELEGRAM_BOT_TOKEN`.
- Если проверки пропущены, обязательно поясните причину.

## Документация и тексты
- Изменения поведения отражайте в `docs/` и `readme.md`.
- При обновлении сообщений синхронизируйте `texts.py` и `texts.json`.
- Не коммитьте реальные персональные данные; используйте заглушки в примерах.

## Коммуникация
- Все комментарии и итоговые сообщения в Pull Request пишите по-русски.
- Названия тредов в Codex должны быть на русском и отражать задачу.
- Ссылайтесь на задействованные документы (`@docs/...`) и прикладывайте логи проверок.
